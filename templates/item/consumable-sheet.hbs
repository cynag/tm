<form class="{{cssClass}}" autocomplete="off">
  <!-- HEADER -->
  <header class="sheet-header">
    <div style="display: flex; align-items: center; gap: 10px;">
      <img src="{{item.img}}" data-edit="img" width="64" height="64" />
      <h1 class="charname">
        <input name="name" type="text" value="{{item.name}}" placeholder="Item Name" />
      </h1>
    </div>
  </header>

  <!-- BODY -->
  <section class="sheet-body" style="padding: 10px; display: flex; flex-direction: column; gap: 16px;">

    <!-- GRID SIZE -->
    <div style="display: flex; gap: 20px;">
      <div>
        <label>Width:</label>
        <input type="number" name="system.grid.w" value="{{item.system.grid.w}}" min="1" style="width: 50px;" />
      </div>
      <div>
        <label>Height:</label>
        <input type="number" name="system.grid.h" value="{{item.system.grid.h}}" min="1" style="width: 50px;" />
      </div>
    </div>

    <!-- CATEGORY -->
    <div>
      <label>Category:</label>
      <select name="system.category">
        {{#each categories as |c|}}
          <option value="{{c}}" {{#if (eq ../item.system.category c)}}selected{{/if}}>{{c}}</option>
        {{/each}}
      </select>
    </div>

    <!-- SUBTYPE -->
    {{#if (lookup subtypes item.system.category)}}
      <div>
        <label>Subtype:</label>
        <select name="system.subtype">
          {{#each (lookup subtypes item.system.category) as |s|}}
            <option value="{{s}}" {{#if (eq ../item.system.subtype s)}}selected{{/if}}>{{s}}</option>
          {{/each}}
        </select>
      </div>
    {{/if}}

    <!-- CATEGORY-SPECIFIC FIELDS -->
    {{#if (eq item.system.category "provision")}}
      <div>
        <label>Provision Value:</label>
        <input type="number" name="system.provision_value" value="{{item.system.provision_value}}" min="0" />
      </div>
    {{/if}}

    {{#if (eq item.system.category "ammo")}}
      <div>
        <label>Ammo Damage Bonus:</label>
        <input type="number" name="system.ammo_damage" value="{{item.system.ammo_damage}}" />
      </div>
      <div>
        <label>Quantity:</label>
        <input type="number" name="system.ammo_quantity" value="{{item.system.ammo_quantity}}" />
      </div>
      <div>
        <label>Stack Limit:</label>
        <input type="number" name="system.stack_value" value="{{item.system.stack_value}}" />
      </div>
    {{/if}}

    <!-- VALUE -->
    <div>
      <label>Value:</label>
      <input type="number" name="system.value" value="{{item.system.value}}" />
    </div>

    <!-- RARITY -->
    <div>
      <label>Rarity:</label>
      <select name="system.rarity">
        <option value="common" {{#if (eq item.system.rarity "common")}}selected{{/if}}>Common</option>
        <option value="uncommon" {{#if (eq item.system.rarity "uncommon")}}selected{{/if}}>Uncommon</option>
        <option value="rare" {{#if (eq item.system.rarity "rare")}}selected{{/if}}>Rare</option>
        <option value="epic" {{#if (eq item.system.rarity "epic")}}selected{{/if}}>Epic</option>
      </select>
    </div>

    <!-- DESCRIPTION -->
    <div>
      <label>Description:</label>
      <textarea name="system.description" rows="4">{{item.system.description}}</textarea>
    </div>

  </section>
</form>
